# ü§ù –ü—Ä–∏–º–µ—Ä —Å–æ–≤–º–µ—Å—Ç–Ω–æ–π —Ä–∞–±–æ—Ç—ã: –Ø (–≤ Cursor) + –ê–≥–µ–Ω—Ç—ã

## –ó–∞–¥–∞—á–∞: –î–æ–±–∞–≤–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏—é –æ—Ç–ø—Ä–∞–≤–∫–∏ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π –æ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è—Ö

---

## –®–ê–ì 1: –ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ –∞–≥–µ–Ω—Ç–∞

**–í—ã –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ:**
```bash
python -m agents.cli plan -g "–§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º –æ –ø—Ä–µ–¥—Å—Ç–æ—è—â–∏—Ö –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è—Ö –∑–∞ 1 —á–∞—Å"
```

**–ê–≥–µ–Ω—Ç —Å–æ–∑–¥–∞–µ—Ç –ø–ª–∞–Ω:**
- –ù–∞–π—Ç–∏ –≤—Å–µ –∞–∫—Ç–∏–≤–Ω—ã–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–∞ —Å–µ–≥–æ–¥–Ω—è
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Ä–µ–º—è (–∑–∞ 1 —á–∞—Å –¥–æ –Ω–∞—á–∞–ª–∞)
- –û—Ç–ø—Ä–∞–≤–∏—Ç—å –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ —á–µ—Ä–µ–∑ NotificationService
- –î–æ–±–∞–≤–∏—Ç—å –≤ –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏

---

## –®–ê–ì 2: –Ø –ø–∏—à—É –∫–æ–¥ –≤ Cursor (–∫–∞–∫ –æ–±—ã—á–Ω–æ)

**–í—ã –º–Ω–µ –≤ —á–∞—Ç:**
"–î–æ–±–∞–≤—å —Ñ—É–Ω–∫—Ü–∏—é –æ—Ç–ø—Ä–∞–≤–∫–∏ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π –ø–æ –ø–ª–∞–Ω—É"

**–Ø —Å–æ–∑–¥–∞—é –∫–æ–¥:**

```python
# –í notifications/reminder_service.py

async def send_booking_reminders(bot, db):
    """–û—Ç–ø—Ä–∞–≤–∫–∞ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π –æ –ø—Ä–µ–¥—Å—Ç–æ—è—â–∏—Ö –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è—Ö"""
    from datetime import datetime, timedelta
    
    now = datetime.now()
    reminder_time = now + timedelta(hours=1)
    
    # –ù–∞—Ö–æ–¥–∏–º –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–µ –Ω–∞—á–∏–Ω–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ —á–∞—Å
    bookings = await db.fetchall("""
        SELECT b.*, u.id as user_id 
        FROM bookings b
        JOIN users u ON b.user_id = u.id
        WHERE b.status = 'active'
        AND DATE(b.date) = DATE('now')
        AND (b.start_time * 60 + b.start_minute) = ?
    """, (reminder_time.hour * 60 + reminder_time.minute,))
    
    for booking in bookings:
        message = f"‚è∞ –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ!\n\n–í–∞—à–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ —á–∞—Å:\n"
        message += f"üìÖ {booking['date']}\n"
        message += f"‚è∞ {booking['start_time']}:{booking['start_minute']:02d}\n"
        message += f"üèÑ {booking['board_name']}\n"
        
        await bot.send_message(chat_id=booking['user_id'], text=message)
```

---

## –®–ê–ì 3: –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —á–µ—Ä–µ–∑ –∞–≥–µ–Ω—Ç–∞

**–í—ã –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ:**
```bash
python -m agents.cli execute -t "–°–æ–∑–¥–∞–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –¥–ª—è —Ñ—É–Ω–∫—Ü–∏–∏ send_booking_reminders" --type documentation
```

**–ê–≥–µ–Ω—Ç —Å–æ–∑–¥–∞–µ—Ç –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é:**
- –û–ø–∏—Å–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏
- –ü–∞—Ä–∞–º–µ—Ç—Ä—ã
- –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

---

## –®–ê–ì 4: –¢–µ—Å—Ç—ã —á–µ—Ä–µ–∑ –∞–≥–µ–Ω—Ç–∞

**–í—ã –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ:**
```bash
python -m agents.cli execute -t "–ù–∞–ø–∏—à–∏ pytest —Ç–µ—Å—Ç—ã –¥–ª—è send_booking_reminders" --type testing
```

**–ê–≥–µ–Ω—Ç —Å–æ–∑–¥–∞–µ—Ç —Ç–µ—Å—Ç—ã:**
- –¢–µ—Å—Ç —É—Å–ø–µ—à–Ω–æ–π –æ—Ç–ø—Ä–∞–≤–∫–∏
- –¢–µ—Å—Ç –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π
- –¢–µ—Å—Ç —Å –º–æ–∫–∞–º–∏

---

## –®–ê–ì 5: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è - —è –ø–æ–º–æ–≥–∞—é

**–í—ã –º–Ω–µ:**
"–ò–Ω—Ç–µ–≥—Ä–∏—Ä—É–π —Ñ—É–Ω–∫—Ü–∏—é –≤ –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫"

**–Ø –¥–æ–±–∞–≤–ª—è—é –≤ notification_scheduler.py:**
```python
async def _check_and_send_reminders(self):
    """–ü—Ä–æ–≤–µ—Ä–∫–∞ –∏ –æ—Ç–ø—Ä–∞–≤–∫–∞ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π"""
    await send_booking_reminders(self.bot, self.db)
```

---

## –ò–¢–û–ì: –ß—Ç–æ –ø–æ–ª—É—á–∏–ª–æ—Å—å

‚úÖ **–ü–ª–∞–Ω** - –∞–≥–µ–Ω—Ç —Å–æ–∑–¥–∞–ª
‚úÖ **–ö–æ–¥** - —è –Ω–∞–ø–∏—Å–∞–ª (–≤ —á–∞—Ç–µ Cursor)
‚úÖ **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è** - –∞–≥–µ–Ω—Ç —Å–æ–∑–¥–∞–ª
‚úÖ **–¢–µ—Å—Ç—ã** - –∞–≥–µ–Ω—Ç —Å–æ–∑–¥–∞–ª
‚úÖ **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è** - —è –ø–æ–º–æ–≥ (–≤ —á–∞—Ç–µ Cursor)

---

## üí° –í—ã–≤–æ–¥

- **–ê–≥–µ–Ω—Ç—ã** - –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä—É—é—Ç —Ä—É—Ç–∏–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏ (–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ, –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è, —Ç–µ—Å—Ç—ã)
- **–Ø (–≤ Cursor)** - –ø–∏—à—É –∫–æ–¥, –∏–Ω—Ç–µ–≥—Ä–∏—Ä—É—é, –ø–æ–º–æ–≥–∞—é —Å –ª–æ–≥–∏–∫–æ–π
- **–í–º–µ—Å—Ç–µ** - –±—ã—Å—Ç—Ä–æ –∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ!

