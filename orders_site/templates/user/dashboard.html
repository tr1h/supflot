<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>–ö–∞–±–∏–Ω–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</title>
  <link rel="stylesheet" href="/static/bootstrap.min.css">
</head>
<body class="p-4">

  <h1>üë§ –õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç</h1>
  <p>–ó–¥–µ—Å—å –≤—ã –º–æ–∂–µ—Ç–µ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∏—Å—Ç–æ—Ä–∏—é –±—Ä–æ–Ω–µ–π –∏ –≤–∞—à–∏ –±–æ–Ω—É—Å—ã.</p>

  <div class="mb-4">
    <button id="loadBonuses" class="btn btn-success">–ü–æ–∫–∞–∑–∞—Ç—å –±–æ–Ω—É—Å—ã</button>
    <div id="bonusesResult" class="mt-2"></div>
  </div>

  <div>
    <button id="loadBookings" class="btn btn-primary">–ó–∞–≥—Ä—É–∑–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é –±—Ä–æ–Ω–µ–π</button>
    <table class="table table-striped mt-2" id="bookingsTable" style="display:none;">
      <thead>
        <tr>
          <th>ID</th><th>–î–∞—Ç–∞</th><th>–í—Ä–µ–º—è</th><th>–ö–æ–ª-–≤–æ</th><th>–°—Ç–∞—Ç—É—Å</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </div>

  <script>
    const userId = /* –ø–æ–¥—Å—Ç–∞–≤—å—Ç–µ –≤–∞—à user_id, –Ω–∞–ø—Ä–∏–º–µ—Ä –∏–∑ cookie */ 1;

    document.getElementById('loadBonuses').onclick = async () => {
      const res = await fetch(`/user/bonuses?user_id=${userId}`);
      const json = await res.json();
      document.getElementById('bonusesResult').innerText = `üéÅ ${json.bonuses} –±–∞–ª–ª–æ–≤`;
    };

    document.getElementById('loadBookings').onclick = async () => {
      const res = await fetch(`/user/bookings?user_id=${userId}`);
      const rows = await res.json();
      const tbody = document.querySelector('#bookingsTable tbody');
      tbody.innerHTML = '';
      rows.forEach(bk => {
        const tr = document.createElement('tr');
        tr.innerHTML = `
          <td>${bk.id}</td>
          <td>${bk.date}</td>
          <td>${bk.start_time}:00</td>
          <td>${bk.quantity}</td>
          <td>${bk.status}</td>`;
        tbody.append(tr);
      });
      document.getElementById('bookingsTable').style.display = rows.length ? '' : 'none';
    };
  </script>
</body>
</html>
